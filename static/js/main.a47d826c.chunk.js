(this["webpackJsonptest-blog-react-app"]=this["webpackJsonptest-blog-react-app"]||[]).push([[0],{118:function(e,t,n){e.exports=n.p+"static/media/Spinner-preloader.f6076e2c.svg"},125:function(e,t,n){e.exports=n.p+"static/media/404-not-found.5682ea5f.jpg"},155:function(e,t,n){e.exports=n(281)},160:function(e,t,n){},164:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(54),c=n.n(o),i=(n(160),n(114)),s=n(115),u=n(127),l=n(116),p=n(128),d=n(28),m=n(17),f=n(7),b=(n(164),n(8)),g=n(118),E=n.n(g),v=n(9);function O(){var e=Object(b.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n"]);return O=function(){return e},e}var h=function(){return r.a.createElement(j,null,r.a.createElement("img",{src:E.a,alt:"preloader"}))},j=v.a.div(O()),y=n(44),x=n(16),w=n.n(x),P=n(122).create({baseURL:"https://bloggy-api.herokuapp.com/"}),S=function(){return P.get("posts")},_=function(e){return P.get("posts/".concat(e,"/?_embed=comments"))},C=function(e){return P.post("posts",e)},k=function(e,t){return P.put("posts/".concat(e),t)},I=function(e){return P.delete("posts/".concat(e))},D=function(e){return P.post("comments",e)},M=n(33),N={postsData:[],postData:{}},T=function(){return function(e){var t;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(S());case 2:(t=n.sent).data&&e({type:"posts/SET_POSTS",posts:t.data});case 4:case"end":return n.stop()}}))}},F=function(e){return function(t){var n;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(_(e));case 2:(n=a.sent).data&&t({type:"posts/SET_POST",post:n.data});case 4:case"end":return a.stop()}}))}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/SET_POSTS":return Object(y.a)({},e,{postsData:t.posts});case"posts/SET_POST":return Object(y.a)({},e,{postData:t.post});default:return e}},A={initialized:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-SUCCESS":return Object(y.a)({},e,{initialized:!0});default:return e}};function L(){var e=Object(b.a)(["\n   display: flex;\n"]);return L=function(){return e},e}function U(){var e=Object(b.a)(["\n   margin: 0;\n"]);return U=function(){return e},e}function J(){var e=Object(b.a)(["\n   margin: 0 0 10px 0;\n"]);return J=function(){return e},e}function R(){var e=Object(b.a)(["\n   border: 1px dashed #363636;\n   padding: 5px;\n"]);return R=function(){return e},e}var W=v.a.li(R()),X=v.a.h5(J()),Z=v.a.p(U()),q=v.a.div(L()),Q=n(22);function V(){var e=Object(b.a)(["\n    color: #fff;\n    background-color: #6ea6ce;\n    font-size: 14px;\n    padding: 4px 13px;\n    border: none;\n    cursor: pointer;\n    outline: none;\n    transition: 0.2s;\n    &:hover {\n        background-color: #256fa5;\n    }\n    &:active {\n        transform: translateY(1px) \n    }\n"]);return V=function(){return e},e}var Y=v.a.button(V()),$=function(e){var t=e.postId,n=e.title,a=e.body,o=e.onDeletePost;return r.a.createElement(W,null,r.a.createElement(X,null,n),r.a.createElement(Z,null,a),r.a.createElement(q,null,r.a.createElement(Q.b,{to:"/post/".concat(t)},"open post"),r.a.createElement(Y,{onClick:function(){return o(t)}},"delete post")))};function G(){var e=Object(b.a)(["\n   display: grid;\n   grid-gap: 5px;\n   list-style: none;\n   margin: 0;\n   padding: 0;\n"]);return G=function(){return e},e}function H(){var e=Object(b.a)(["\n   border: 1px solid #ccc;\n   padding: 10px;\n"]);return H=function(){return e},e}var K=v.a.div(H()),ee=v.a.ul(G()),te=n(111),ne=n(112),ae=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},re=n(31),oe=n.n(re),ce=function(e){var t=e.input,n=e.placeholder,a=e.meta,o=a.touched,c=a.error,i=a.warning;return r.a.createElement("div",{className:oe.a.formControl},r.a.createElement("textarea",Object.assign({},t,{placeholder:n})),o&&(c&&r.a.createElement("span",{className:oe.a.errorMessage},c)||i&&r.a.createElement("span",{className:oe.a.warningMessage},i)))},ie=function(e){var t=e.input,n=e.label,a=e.type,o=e.placeholder,c=e.meta,i=c.touched,s=c.error,u=c.warning;return r.a.createElement("div",{className:oe.a.formControl},r.a.createElement("label",null,n,r.a.createElement("input",Object.assign({},t,{type:a,placeholder:o}))),i&&(s&&r.a.createElement("span",{className:oe.a.errorMessage},s)||u&&r.a.createElement("span",{className:oe.a.warningMessage},u)))};function se(){var e=Object(b.a)(["\n   display: grid;\n   grid-gap: 5px;\n   list-style: none;\n   margin: 0;\n   padding: 0;\n"]);return se=function(){return e},e}function ue(){var e=Object(b.a)(["\n   \n"]);return ue=function(){return e},e}function le(){var e=Object(b.a)(["\n    display: grid;\n\n    border: 1px solid #ccc;\n    margin-bottom: 10px;\n"]);return le=function(){return e},e}var pe=v.a.form(le()),de=v.a.span(ue()),me=(v.a.ul(se()),ae(300)),fe=Object(ne.a)({form:"addPostForm"})((function(e){var t=e.handleSubmit,n=e.pristine,a=e.submitting;return r.a.createElement(pe,{onSubmit:t},r.a.createElement(de,null,"Add new post:"),r.a.createElement(te.a,{name:"title",placeholder:"Post title",component:ie,validate:me}),r.a.createElement(te.a,{name:"body",placeholder:"Post message",component:ce,validate:me}),r.a.createElement(Y,{type:"submit",disabled:n||a},"Add post"))})),be=function(e){var t=e.posts,n=e.addPost,a=e.onDeletePost;return r.a.createElement(K,null,r.a.createElement(fe,{onSubmit:function(e){n(e)}}),r.a.createElement(ee,null,t.map((function(e){return r.a.createElement($,{key:e.id,postId:e.id,title:e.title,body:e.body,onDeletePost:a})}))))},ge=Object(f.d)(Object(m.b)((function(e){return{posts:e.postsPage.postsData}}),{getPosts:T,addPost:function(e){return function(t){return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(C(e));case 2:201===n.sent.status&&(t(T()),t(Object(M.a)("addPostForm")));case 4:case"end":return n.stop()}}))}},deletePost:function(e){return function(t){return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(I(e));case 2:200===n.sent.status&&t(T());case 4:case"end":return n.stop()}}))}}}),d.g)((function(e){Object(a.useEffect)((function(){e.getPosts()}),[]);return r.a.createElement(be,Object.assign({},e,{addPost:e.addPost,onDeletePost:function(t){e.deletePost(t)}}))})),Ee=n(45),ve=ae(300),Oe=Object(ne.a)({form:"addCommentForm"})((function(e){var t=e.handleSubmit,n=e.pristine,a=e.submitting;return r.a.createElement("form",{onSubmit:t},r.a.createElement("span",null,"Add new comment:"),r.a.createElement(te.a,{name:"body",placeholder:"Post message",component:ce,validate:ve}),r.a.createElement(Y,{type:"submit",disabled:n||a},"Add post"))}));function he(){var e=Object(b.a)(["\n   display: grid;\n   grid-gap: 5px;\n   list-style: none;\n   margin: 0;\n   padding: 0;\n"]);return he=function(){return e},e}function je(){var e=Object(b.a)(["\n   resize: none;\n   padding: 5px;\n"]);return je=function(){return e},e}function ye(){var e=Object(b.a)(["\n   margin: 0;\n   cursor: pointer;\n   &:hover {\n      background-color: #ccc;\n   }\n"]);return ye=function(){return e},e}function xe(){var e=Object(b.a)(["\n   margin: 5px 0;\n   padding: 5px;\n"]);return xe=function(){return e},e}function we(){var e=Object(b.a)(["\n   margin: 5px 0;\n   cursor: pointer;\n   &:hover {\n      background-color: #ccc;\n   }\n"]);return we=function(){return e},e}function Pe(){var e=Object(b.a)(["\n   a {\n      display: inline-block;\n      text-decoration: none;\n      padding: 3px 5px;\n      color: #fff;\n      background-color: #ccc;\n   }\n"]);return Pe=function(){return e},e}function Se(){var e=Object(b.a)(["\n   display: flex;\n   flex-flow: column wrap;\n   border: 1px solid #ccc;\n   padding: 10px;\n"]);return Se=function(){return e},e}var _e=v.a.div(Se()),Ce=v.a.div(Pe()),ke=v.a.h5(we()),Ie=v.a.input(xe()),De=v.a.p(ye()),Me=v.a.textarea(je()),Ne=(v.a.ul(he()),function(e){var t=e.postId,n=e.post,o=e.editPost,c=e.addComment,i=Object(a.useState)(n.title),s=Object(Ee.a)(i,2),u=s[0],l=s[1],p=Object(a.useState)(!1),d=Object(Ee.a)(p,2),m=d[0],f=d[1],b=Object(a.useState)(n.body),g=Object(Ee.a)(b,2),E=g[0],v=g[1],O=Object(a.useState)(!1),h=Object(Ee.a)(O,2),j=h[0],y=h[1];Object(a.useEffect)((function(){l(n.title),v(n.body)}),[n]);var x=function(){m?(f(!1),o(t,{title:u,body:E})):f(!0)},w=function(){j?(y(!1),o(t,{title:u,body:E})):y(!0)};return r.a.createElement(_e,null,r.a.createElement(Ce,null,r.a.createElement(Q.b,{to:"/posts"},"back to posts")),!m&&r.a.createElement(ke,{onClick:x},n.title),m&&r.a.createElement(Ie,{onChange:function(e){return l(e.target.value)},onBlur:x,autoFocus:!0,value:u}),!j&&r.a.createElement(De,{onClick:w},n.body),j&&r.a.createElement(Me,{rows:"7",onChange:function(e){return v(e.target.value)},onBlur:w,autoFocus:!0,value:E}),r.a.createElement("span",null,"comments:"),r.a.createElement("ul",null,n.comments&&n.comments.map((function(e){return r.a.createElement("li",{key:e.id},e.body)}))),r.a.createElement(Oe,{onSubmit:function(e){c(t,e)}}))}),Te=Object(f.d)(Object(m.b)((function(e){return{post:e.postsPage.postData}}),{getPost:F,editPost:function(e,t){return function(n){return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w.a.awrap(k(e,t));case 2:200===a.sent.status&&n(F(e));case 4:case"end":return a.stop()}}))}},addComment:function(e,t){return function(n){var a;return w.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a={postId:+e,body:t.body},r.next=3,w.a.awrap(D(a));case 3:201===r.sent.status&&(n(F(e)),n(Object(M.a)("addCommentForm")));case 5:case"end":return r.stop()}}))}}}),d.g)((function(e){var t=e.match.params.postId;return Object(a.useEffect)((function(){e.getPost(t)}),[]),r.a.createElement(Ne,Object.assign({},e,{postId:t,editPost:e.editPost,addComment:e.addComment}))})),Fe=n(125),ze=n.n(Fe),Ae=function(){return r.a.createElement("img",{src:ze.a,alt:"NotFound"})},Be=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(d.a,{to:"/posts"})}}),r.a.createElement(d.b,{exact:!0,path:"/posts",render:function(){return r.a.createElement(ge,null)}}),r.a.createElement(d.b,{exact:!0,path:"/post/:postId?",render:function(){return r.a.createElement(Te,null)}}),r.a.createElement(d.b,{path:"/404",render:function(){return r.a.createElement(Ae,null)}}),r.a.createElement(d.b,{path:"*",render:function(){return r.a.createElement(d.a,{to:"/404"})}}))):r.a.createElement(h,null)}}]),t}(a.Component),Le=Object(f.d)(d.g,Object(m.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(T()).then((function(){e({type:"INITIALIZED-SUCCESS"})}))}}}))(Be),Ue=n(126),Je=n(113),Re=Object(f.c)({app:B,postsPage:z,form:Je.a}),We=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,Xe=Object(f.e)(Re,We(Object(f.a)(Ue.a)));window.__store__=Xe;var Ze=Xe;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Q.a,null,r.a.createElement(m.a,{store:Ze},r.a.createElement(Le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,n){e.exports={formControl:"FormsControls_formControl__3Qncq",errorMessage:"FormsControls_errorMessage__1F7ye",warningMessage:"FormsControls_warningMessage__388yM"}}},[[155,1,2]]]);
//# sourceMappingURL=main.a47d826c.chunk.js.map